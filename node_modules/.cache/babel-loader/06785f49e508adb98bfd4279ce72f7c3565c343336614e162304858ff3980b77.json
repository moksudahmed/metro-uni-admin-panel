{"ast":null,"code":"var _jsxFileName = \"G:\\\\React App\\\\MuErp\\\\MUCampus\\\\New folder\\\\metro-uni-admin-panel\\\\src\\\\pages\\\\Students\\\\Account.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Lock, PlusCircle, AlertCircle } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.REACT_APP_API_URL;\nexport default function Account({\n  studentId,\n  token,\n  accountExists,\n  onAccountCreated\n}) {\n  _s();\n  const [account, setAccount] = useState({\n    loginID: \"\",\n    usr_active: true\n  });\n  console.log(studentId);\n  /* =========================\r\n     LOAD ACCOUNT\r\n  ========================= */\n  useEffect(() => {\n    if (!accountExists) return;\n    const loadAccount = async () => {\n      const res = await fetch(`${API_BASE_URL}/api/v1/admin/student-users/${studentId}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n      setAccount({\n        loginID: data.loginID || \"\",\n        usr_active: Boolean(data.usr_active)\n      });\n    };\n    loadAccount();\n  }, [studentId, token, accountExists]);\n\n  /* =========================\r\n     CREATE ACCOUNT\r\n  ========================= */\n  const createAccount = async () => {\n    const res = await fetch(`${API_BASE_URL}/api/v1/admin/student-users/${studentId}`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        usr_active: true\n      })\n    });\n    if (res.ok) {\n      alert(\"✅ Account created successfully\");\n      onAccountCreated();\n    } else {\n      alert(\"❌ Failed to create account\");\n    }\n  };\n\n  /* =========================\r\n     UI\r\n  ========================= */\n  if (!accountExists) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-card warning\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u26A0\\uFE0F No user account exists for this student.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: createAccount,\n        children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), \" Create Account\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Account Information\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Login ID:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), \" \", account.loginID]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Status:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), \" \", account.usr_active ? \"Active\" : \"Inactive\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n/* =========================\r\n   PASSWORD SUB-COMPONENT\r\n========================= */\n_s(Account, \"AyxhzOosPRIm+8AG/uIq0f4b5NY=\");\n_c = Account;\nAccount.Password = _s2(function PasswordTab({\n  studentId,\n  token\n}) {\n  _s2();\n  const [password, setPassword] = useState({\n    new: \"\",\n    confirm: \"\"\n  });\n  const resetPassword = async () => {\n    if (password.new !== password.confirm) {\n      alert(\"Passwords do not match\");\n      return;\n    }\n    await fetch(`${API_BASE_URL}/api/v1/admin/student-users/${studentId}/password`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        password: password.new\n      })\n    });\n    alert(\"Password reset successful\");\n    setPassword({\n      new: \"\",\n      confirm: \"\"\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [/*#__PURE__*/_jsxDEV(Lock, {\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), \" Reset Password\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: \"New password\",\n      value: password.new,\n      onChange: e => setPassword({\n        ...password,\n        new: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      placeholder: \"Confirm password\",\n      value: password.confirm,\n      onChange: e => setPassword({\n        ...password,\n        confirm: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: resetPassword,\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), \" Reset Password\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n}, \"javLW08N6PTkVigLUd0eYl2Xp0U=\");\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["useEffect","useState","Lock","PlusCircle","AlertCircle","jsxDEV","_jsxDEV","API_BASE_URL","process","env","REACT_APP_API_URL","Account","studentId","token","accountExists","onAccountCreated","_s","account","setAccount","loginID","usr_active","console","log","loadAccount","res","fetch","headers","Authorization","data","json","Boolean","createAccount","method","body","JSON","stringify","ok","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","_c","Password","_s2","PasswordTab","password","setPassword","new","confirm","resetPassword","type","placeholder","value","onChange","e","target","$RefreshReg$"],"sources":["G:/React App/MuErp/MUCampus/New folder/metro-uni-admin-panel/src/pages/Students/Account.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Lock, PlusCircle, AlertCircle } from \"lucide-react\";\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL;\r\n\r\nexport default function Account({\r\n  studentId,\r\n  token,\r\n  accountExists,\r\n  onAccountCreated,\r\n}) {\r\n  const [account, setAccount] = useState({\r\n    loginID: \"\",\r\n    usr_active: true,\r\n  });\r\n  console.log(studentId);\r\n  /* =========================\r\n     LOAD ACCOUNT\r\n  ========================= */\r\n  useEffect(() => {\r\n    if (!accountExists) return;\r\n\r\n    const loadAccount = async () => {\r\n      const res = await fetch(\r\n        `${API_BASE_URL}/api/v1/admin/student-users/${studentId}`,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      const data = await res.json();\r\n      setAccount({\r\n        loginID: data.loginID || \"\",\r\n        usr_active: Boolean(data.usr_active),\r\n      });\r\n    };\r\n\r\n    loadAccount();\r\n  }, [studentId, token, accountExists]);\r\n\r\n  /* =========================\r\n     CREATE ACCOUNT\r\n  ========================= */\r\n  const createAccount = async () => {\r\n    const res = await fetch(\r\n      `${API_BASE_URL}/api/v1/admin/student-users/${studentId}`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ usr_active: true }),\r\n      }\r\n    );\r\n\r\n    if (res.ok) {\r\n      alert(\"✅ Account created successfully\");\r\n      onAccountCreated();\r\n    } else {\r\n      alert(\"❌ Failed to create account\");\r\n    }\r\n  };\r\n\r\n  /* =========================\r\n     UI\r\n  ========================= */\r\n  if (!accountExists) {\r\n    return (\r\n      <div className=\"profile-card warning\">\r\n        <p>⚠️ No user account exists for this student.</p>\r\n        <button className=\"btn-primary\" onClick={createAccount}>\r\n          <PlusCircle size={16} /> Create Account\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-card\">\r\n      <h3>Account Information</h3>\r\n      <p>\r\n        <strong>Login ID:</strong> {account.loginID}\r\n      </p>\r\n      <p>\r\n        <strong>Status:</strong>{\" \"}\r\n        {account.usr_active ? \"Active\" : \"Inactive\"}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* =========================\r\n   PASSWORD SUB-COMPONENT\r\n========================= */\r\nAccount.Password = function PasswordTab({ studentId, token }) {\r\n  const [password, setPassword] = useState({ new: \"\", confirm: \"\" });\r\n\r\n  const resetPassword = async () => {\r\n    if (password.new !== password.confirm) {\r\n      alert(\"Passwords do not match\");\r\n      return;\r\n    }\r\n\r\n    await fetch(\r\n      `${API_BASE_URL}/api/v1/admin/student-users/${studentId}/password`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify({ password: password.new }),\r\n      }\r\n    );\r\n\r\n    alert(\"Password reset successful\");\r\n    setPassword({ new: \"\", confirm: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile-card\">\r\n      <h3>\r\n        <Lock size={16} /> Reset Password\r\n      </h3>\r\n\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"New password\"\r\n        value={password.new}\r\n        onChange={(e) =>\r\n          setPassword({ ...password, new: e.target.value })\r\n        }\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        placeholder=\"Confirm password\"\r\n        value={password.confirm}\r\n        onChange={(e) =>\r\n          setPassword({ ...password, confirm: e.target.value })\r\n        }\r\n      />\r\n      <button onClick={resetPassword}>\r\n        <AlertCircle size={16} /> Reset Password\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}