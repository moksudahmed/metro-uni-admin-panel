{"ast":null,"code":"import axios from \"axios\";\nconst apiUrl = process.env.REACT_APP_API_URL;\nconst API_URL = `${apiUrl}api/v1`;\nexport const fetchStudentRecord = async (student_id, token) => {\n  try {\n    if (!student_id) {\n      throw new Error(\"Student ID is required.\");\n    }\n    if (!token) {\n      throw new Error(\"Authentication token is missing.\");\n    }\n    const response = await axios.get(`${API_URL}/student-record/${student_id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response2, _error$response2$data;\n    console.error(\"❌ Failed to fetch student record:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Unable to retrieve student record. Please try again.\");\n  }\n};\nexport const searchStudents = async (student_id, token) => {\n  try {\n    if (!student_id) {\n      throw new Error(\"Student ID is required.\");\n    }\n    if (!token) {\n      throw new Error(\"Authentication token is missing.\");\n    }\n    console.log(`${API_URL}/student-record/${student_id}`);\n    const response = await axios.get(`${API_URL}/student-record/${student_id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response3, _error$response4, _error$response4$data;\n    console.error(\"❌ Failed to fetch student record:\", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n    throw new Error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || \"Unable to retrieve student record. Please try again.\");\n  }\n};\nexport const fetchStudentPhoto = async (student_id, token) => {\n  const fallbackPhoto = \"/default-avatar.jpg\";\n  if (!student_id) {\n    console.error(\"❌ Student ID is missing.\");\n    return fallbackPhoto;\n  }\n  if (!token) {\n    console.error(\"❌ Token is missing.\");\n    return fallbackPhoto;\n  }\n  try {\n    const photoUrl = `${API_URL}/student-record/student-photo/${student_id}`;\n\n    // Fetch the image as blob\n    const response = await axios.get(photoUrl, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      responseType: \"blob\"\n    });\n    console.log(response);\n    // Convert blob to a usable image URL\n    return URL.createObjectURL(response.data);\n  } catch (error) {\n    var _error$response5;\n    console.error(\"❌ Failed to load student photo:\", ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data) || error.message);\n    return fallbackPhoto; // return default image\n  }\n};","map":{"version":3,"names":["axios","apiUrl","process","env","REACT_APP_API_URL","API_URL","fetchStudentRecord","student_id","token","Error","response","get","headers","Authorization","data","error","_error$response","_error$response2","_error$response2$data","console","message","searchStudents","log","_error$response3","_error$response4","_error$response4$data","fetchStudentPhoto","fallbackPhoto","photoUrl","responseType","URL","createObjectURL","_error$response5"],"sources":["D:/Development/metro-uni-admin-panel/src/api/student.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nconst API_URL = `${apiUrl}api/v1`;\r\n\r\nexport const fetchStudentRecord = async (student_id, token) => {\r\n  try {\r\n    if (!student_id) {\r\n      throw new Error(\"Student ID is required.\");\r\n    }\r\n\r\n    if (!token) {\r\n      throw new Error(\"Authentication token is missing.\");\r\n    }\r\n\r\n    const response = await axios.get(`${API_URL}/student-record/${student_id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Accept\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    return response.data;\r\n\r\n  } catch (error) {\r\n    console.error(\"❌ Failed to fetch student record:\", error.response?.data || error.message);\r\n\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n      \"Unable to retrieve student record. Please try again.\"\r\n    );\r\n  }\r\n};\r\n\r\n\r\nexport const searchStudents = async (student_id, token) => {\r\n  try {\r\n    if (!student_id) {\r\n      throw new Error(\"Student ID is required.\");\r\n    }\r\n\r\n    if (!token) {\r\n      throw new Error(\"Authentication token is missing.\");\r\n    }\r\n    console.log(`${API_URL}/student-record/${student_id}`);\r\n    const response = await axios.get(`${API_URL}/student-record/${student_id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Accept\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    return response.data;\r\n\r\n  } catch (error) {\r\n    console.error(\"❌ Failed to fetch student record:\", error.response?.data || error.message);\r\n\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n      \"Unable to retrieve student record. Please try again.\"\r\n    );\r\n  }\r\n};\r\n\r\nexport const fetchStudentPhoto = async (student_id, token) => {\r\n  const fallbackPhoto = \"/default-avatar.jpg\";\r\n\r\n  if (!student_id) {\r\n    console.error(\"❌ Student ID is missing.\");\r\n    return fallbackPhoto;\r\n  }\r\n\r\n  if (!token) {\r\n    console.error(\"❌ Token is missing.\");\r\n    return fallbackPhoto;\r\n  }\r\n\r\n  try {\r\n    const photoUrl = `${API_URL}/student-record/student-photo/${student_id}`;\r\n   \r\n    // Fetch the image as blob\r\n    const response = await axios.get(photoUrl, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      responseType: \"blob\",\r\n    });\r\n    console.log(response);\r\n    // Convert blob to a usable image URL\r\n    return URL.createObjectURL(response.data);\r\n\r\n  } catch (error) {\r\n    console.error(\r\n      \"❌ Failed to load student photo:\",\r\n      error.response?.data || error.message\r\n    );\r\n    return fallbackPhoto; // return default image\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}