{"ast":null,"code":"import api from \"./client\";\nimport axios from \"axios\";\nconst apiUrl = process.env.REACT_APP_API_URL;\nconst API_URL = `${apiUrl}/api/v1/admin`;\nexport const fetchStudents3 = async () => {\n  const res = await api.get(\"/students\");\n  return res.data;\n};\nexport const fetchStudents = async token => {\n  try {\n    const response = await axios.get(`${API_URL}/students`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    });\n    console.log(response);\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response2, _error$response2$data;\n    console.error(\"❌ Failed to fetch student record:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Unable to retrieve student record. Please try again.\");\n  }\n};\nexport const fetchStudentRecord = async (student_id, token) => {\n  try {\n    if (!student_id) {\n      throw new Error(\"Student ID is required.\");\n    }\n\n    /* if (!token) {\r\n       throw new Error(\"Authentication token is missing.\");\r\n     }*/\n\n    const response = await axios.get(`${API_URL}/students/${student_id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Accept\": \"application/json\"\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response3, _error$response4, _error$response4$data;\n    console.error(\"❌ Failed to fetch student record:\", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n    throw new Error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || \"Unable to retrieve student record. Please try again.\");\n  }\n};\nexport const fetchStudentPhoto = async (student_id, token) => {\n  const fallbackPhoto = \"/default-avatar.jpg\";\n  if (!student_id) {\n    console.error(\"❌ Student ID is missing.\");\n    return fallbackPhoto;\n  }\n\n  /*if (!token) {\r\n    console.error(\"❌ Token is missing.\");\r\n    return fallbackPhoto;\r\n  }*/\n\n  try {\n    const photoUrl = `${API_URL}/student-photo/${student_id}`;\n\n    // Fetch the image as blob\n    const response = await axios.get(photoUrl, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      responseType: \"blob\"\n    });\n    console.log(response);\n    // Convert blob to a usable image URL\n    return URL.createObjectURL(response.data);\n  } catch (error) {\n    var _error$response5;\n    console.error(\"❌ Failed to load student photo:\", ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data) || error.message);\n    return fallbackPhoto; // return default image\n  }\n};\nexport const fetchStudent = async id => {\n  const res = await api.get(`/students/${id}`);\n  return res.data;\n};","map":{"version":3,"names":["api","axios","apiUrl","process","env","REACT_APP_API_URL","API_URL","fetchStudents3","res","get","data","fetchStudents","token","response","headers","Authorization","console","log","error","_error$response","_error$response2","_error$response2$data","message","Error","fetchStudentRecord","student_id","_error$response3","_error$response4","_error$response4$data","fetchStudentPhoto","fallbackPhoto","photoUrl","responseType","URL","createObjectURL","_error$response5","fetchStudent","id"],"sources":["G:/React App/MuErp/MUCampus/New folder/metro-uni-admin-panel/src/api/students.api.js"],"sourcesContent":["import api from \"./client\";\r\nimport axios from \"axios\";\r\n\r\nconst apiUrl = process.env.REACT_APP_API_URL;\r\nconst API_URL = `${apiUrl}/api/v1/admin`;\r\n\r\n\r\nexport const fetchStudents3 = async () => {\r\n  const res = await api.get(\"/students\");\r\n  return res.data;\r\n};\r\n\r\nexport const fetchStudents = async (token) => {\r\n  try {\r\n    \r\n    const response = await axios.get(`${API_URL}/students`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Accept\": \"application/json\",\r\n      },\r\n    });\r\n    console.log(response);\r\n    return response.data;\r\n\r\n  } catch (error) {\r\n    console.error(\"❌ Failed to fetch student record:\", error.response?.data || error.message);\r\n\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n      \"Unable to retrieve student record. Please try again.\"\r\n    );\r\n  }\r\n};\r\n\r\n\r\nexport const fetchStudentRecord = async (student_id, token) => {\r\n  try {\r\n    if (!student_id) {\r\n      throw new Error(\"Student ID is required.\");\r\n    }\r\n\r\n   /* if (!token) {\r\n      throw new Error(\"Authentication token is missing.\");\r\n    }*/\r\n    \r\n    const response = await axios.get(`${API_URL}/students/${student_id}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Accept\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    return response.data;\r\n\r\n  } catch (error) {\r\n    console.error(\"❌ Failed to fetch student record:\", error.response?.data || error.message);\r\n\r\n    throw new Error(\r\n      error.response?.data?.message ||\r\n      \"Unable to retrieve student record. Please try again.\"\r\n    );\r\n  }\r\n};\r\n\r\nexport const fetchStudentPhoto = async (student_id, token) => {\r\n  const fallbackPhoto = \"/default-avatar.jpg\";\r\n\r\n  if (!student_id) {\r\n    console.error(\"❌ Student ID is missing.\");\r\n    return fallbackPhoto;\r\n  }\r\n\r\n  /*if (!token) {\r\n    console.error(\"❌ Token is missing.\");\r\n    return fallbackPhoto;\r\n  }*/\r\n\r\n  try {\r\n    const photoUrl = `${API_URL}/student-photo/${student_id}`;\r\n   \r\n    // Fetch the image as blob\r\n    const response = await axios.get(photoUrl, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n      responseType: \"blob\",\r\n    });\r\n    console.log(response);\r\n    // Convert blob to a usable image URL\r\n    return URL.createObjectURL(response.data);\r\n\r\n  } catch (error) {\r\n    console.error(\r\n      \"❌ Failed to load student photo:\",\r\n      error.response?.data || error.message\r\n    );\r\n    return fallbackPhoto; // return default image\r\n  }\r\n};\r\n\r\nexport const fetchStudent = async (id) => {\r\n  const res = await api.get(`/students/${id}`);\r\n  return res.data;\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}